<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Lattices · MonteCarlo.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="MonteCarlo.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit">MonteCarlo.jl</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><span class="tocitem">DQMC</span><ul><li><a class="tocitem" href="../Introduction/">Introduction</a></li><li><a class="tocitem" href="../model/">Model</a></li><li class="is-active"><a class="tocitem" href>Lattices</a><ul class="internal"><li><a class="tocitem" href="#Interface-1"><span>Interface</span></a></li><li><a class="tocitem" href="#Implementing-your-own-lattice-1"><span>Implementing your own lattice</span></a></li><li><a class="tocitem" href="#Lattice-Iterators-1"><span>Lattice Iterators</span></a></li></ul></li><li><a class="tocitem" href="../fields/">Fields</a></li><li><a class="tocitem" href="../dqmc/">DQMC</a></li><li><a class="tocitem" href="../recorder/">Configuration Recorder</a></li><li><a class="tocitem" href="../scheduler/">Update Scheduler</a></li><li><a class="tocitem" href="../measurements/">Measurements</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/triangular_Hubbard/">Triangular Attractive Hubbard</a></li><li><a class="tocitem" href="../../examples/ALF1/">Crosscheck with ALF</a></li><li><a class="tocitem" href="../../examples/HofmannBergChowdhury/">Topological Flat Band Model</a></li></ul></li><li><span class="tocitem">Legacy</span><ul><li><a class="tocitem" href="../../legacy/">Introduction</a></li><li><input class="collapse-toggle" id="menuitem-4-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2"><span class="docs-label">Manual</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../legacy/manual/gettingstarted/">Getting started</a></li><li><a class="tocitem" href="../../legacy/manual/showcase/">Showcase</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-3" type="checkbox"/><label class="tocitem" for="menuitem-4-3"><span class="docs-label">Physical models</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../legacy/models/ising/">Ising model</a></li><li><a class="tocitem" href="../../legacy/models/hubbardattractive/">Attractive Hubbard model</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-4" type="checkbox"/><label class="tocitem" for="menuitem-4-4"><span class="docs-label">Monte Carlo flavors</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../legacy/flavors/mc/">MC</a></li><li><a class="tocitem" href="../../legacy/flavors/dqmc/">DQMC</a></li></ul></li><li><a class="tocitem" href="../../legacy/lattices/">Lattices</a></li><li><a class="tocitem" href="../../legacy/customize/">Customize</a></li><li><input class="collapse-toggle" id="menuitem-4-7" type="checkbox"/><label class="tocitem" for="menuitem-4-7"><span class="docs-label">Interfaces</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../legacy/interfaces/MC/">MC</a></li><li><a class="tocitem" href="../../legacy/interfaces/DQMC/">DQMC</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-8" type="checkbox"/><label class="tocitem" for="menuitem-4-8"><span class="docs-label">General exports</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../legacy/methods/general/">General</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">DQMC</a></li><li class="is-active"><a href>Lattices</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Lattices</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/carstenbauer/MonteCarlo.jl/blob/master/docs/src/DQMC/lattice.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Lattices-1"><a class="docs-heading-anchor" href="#Lattices-1">Lattices</a><a class="docs-heading-anchor-permalink" href="#Lattices-1" title="Permalink"></a></h1><p>A lattice as we implement it describes a collection of sites in space, connected by bonds.</p><h2 id="Interface-1"><a class="docs-heading-anchor" href="#Interface-1">Interface</a><a class="docs-heading-anchor-permalink" href="#Interface-1" title="Permalink"></a></h2><p>There are a few functions defined for lattices which you may find useful. </p><ul><li><code>position(lattice)</code> returns an iterator which produces all site position of the lattice. When collected, this will create a D+1 dimensional array for a D dimensional lattice, where the first index represents the basis and the following represent the extend along the different lattice vectors.</li><li><code>bonds(lattice[, directed = Val(false)])</code> returns an iterator which produces all bonds of the lattice. If <code>directed = Val(false)</code> bonds will be assumed to be directionless, meaning that only one of <span>$1 \to 2$</span> and <span>$2 \to 1$</span> will be returned. If <code>directed = Val(true)</code> both bonds will be generated.</li><li><code>bond_open(lattice[, directed = false)</code> returns an iterator which filters out periodic bonds which might be useful for plotting.</li><li><code>bonds(lattice, site::Int)</code> returns an iterator which produces bonds starting from <code>site</code>.</li><li><code>lattice_vectors(lattice)</code> returns the lattice vectors of the lattice. (These are the vectors <span>$v_i$</span> in <span>$R = v_1 i_1 + v_2 i_2 + v_3 i_3$</span>, i.e.e the vectors that generate the periodic Bravais lattice.)</li><li><code>reciprocal_vectors(lattice)</code> returns the Fourier transformed lattice vectors.</li><li><code>length(lattice)</code> returns the total number of sites in the lattice.</li><li><code>size(lattice)</code> returns the size of the lattice starting with the number of basis sites. </li><li><code>eachindex(lattice)</code> returns a <code>1:length(lattice)</code></li><li><code>Bravais(lattice)</code> returns a wrapped lattice for which the above methods ignore the basis. For example <code>positions(Bravais(lattice))</code> will return an iterator of all Bravais lattice positions.</li></ul><h2 id="Implementing-your-own-lattice-1"><a class="docs-heading-anchor" href="#Implementing-your-own-lattice-1">Implementing your own lattice</a><a class="docs-heading-anchor-permalink" href="#Implementing-your-own-lattice-1" title="Permalink"></a></h2><h3 id="LatticePhysics.jl-1"><a class="docs-heading-anchor" href="#LatticePhysics.jl-1">LatticePhysics.jl</a><a class="docs-heading-anchor-permalink" href="#LatticePhysics.jl-1" title="Permalink"></a></h3><p><a href="https://github.com/janattig/LatticePhysics.jl">LatticePhysics.jl</a> already has a lot of common lattices implemented, which can be converted to MonteCarlo.jl lattices. For this you simple need to call <code>MonteCarlo.Lattice(lattice_physics_lattice)</code>. Note that the reverse is also implemented as <code>LatPhysBase.Lattice(mc_lattice)</code>.</p><h3 id="MonteCarlo.jl-1"><a class="docs-heading-anchor" href="#MonteCarlo.jl-1">MonteCarlo.jl</a><a class="docs-heading-anchor-permalink" href="#MonteCarlo.jl-1" title="Permalink"></a></h3><p>If neither MonteCarlo.jl nor LatticePhysics.jl implements the lattice you need, you can implement your own through a custom constructor. This process is very similar between both libraries. Let us take the implementation for the <code>Honeycomb</code> lattice as an example:</p><pre><code class="language-julia">function Honeycomb(Lx, Ly = Lx)
    uc = UnitCell(
        # Name
        &quot;Honeycomb&quot;,
        # lattice vectors
        (Float64[sqrt(3.0)/2, -0.5], Float64[sqrt(3.0)/2, +0.5]),
        # basis
        [Float64[0.0, 0.0], Float64[1/sqrt(3.0), 0.0]],
        # bonds
        [
            Bond(1, 2, (0, 0)), Bond(1, 2, (-1, 0)), Bond(1, 2, (0, -1)),
            Bond(2, 1, (0, 0)), Bond(2, 1, ( 1, 0)), Bond(2, 1, (0,  1)),
        ]
    )

    return Lattice(uc, (Lx, Ly))
end</code></pre><p>As you can see the main task here is to create a fitting unit cell. In order, the unit cell constructors takes the following arguments.</p><ol><li>The name of the lattice. This is used for printing and might be useful if you wish to restrict a model to a specific lattice.</li><li>The basis of the lattice. (The positions of sites within a unit cell.)</li><li>The lattice vectors, i.e. the vectors that generate the periodic Bravais lattice.</li><li>The bonds of the lattice. Each bond contains three values: The basis site the bond starts at, the basis site it ends at and the Bravais shift which allows a bond to connect to neighboring unit cell. </li></ol><p>Note that bonds also have an integer label which can be used to differentiate them later. Note as well that the <code>UnitCell</code> constructor will generate missing bonds <span>$b \to a$</span> if <span>$a \to b$</span> exists.</p><h2 id="Lattice-Iterators-1"><a class="docs-heading-anchor" href="#Lattice-Iterators-1">Lattice Iterators</a><a class="docs-heading-anchor-permalink" href="#Lattice-Iterators-1" title="Permalink"></a></h2><p>Lattice Iterators are to some degree a backend component. They specify a way to iterate through the lattice, and are mainly used for DQMC measurements which frequently require specific pairings of sites. The iterators fall into three categories:</p><h3 id="DirectLatticeIterator-1"><a class="docs-heading-anchor" href="#DirectLatticeIterator-1">DirectLatticeIterator`</a><a class="docs-heading-anchor-permalink" href="#DirectLatticeIterator-1" title="Permalink"></a></h3><p>First we have <code>DirectLatticeIterator</code>. These iterators return just site indices, e.g. <code>(source_index, target_index)</code>. The concrete implementations include:</p><ul><li><code>EachSiteAndFlavor</code> iterates all indices from 1 to <code>length(lattice) * nflavors(mc)</code></li><li><code>EachSite</code> iterates through <code>eachindex(lattice)</code></li><li><code>EachSitePair</code> iterates through all possible pairs <code>(i, j)</code> where both i and j iterate <code>eachindex(lattice)</code>.</li></ul><h3 id="DeferredLatticeIterator-1"><a class="docs-heading-anchor" href="#DeferredLatticeIterator-1">DeferredLatticeIterator</a><a class="docs-heading-anchor-permalink" href="#DeferredLatticeIterator-1" title="Permalink"></a></h3><p>The second category inherit from <code>DeferredLatticeIterator</code>. Iterators in this category produce two sets of indices, one which is used to access lattice sites and one which is used to access some output array. In this category we have:</p><ul><li><code>OnSite</code> which also <code>eachindex(lattice)</code>, but returns three indices <code>(i, i, i)</code> at each step.</li><li><code>EachSitePairByDistance</code> which iterates the same range as <code>EachSitePair</code> but returns <code>(combined_idx, i, j)</code> at each step. The <code>combined_idx</code> combines the index of source basis site, the target basis and an index corresponding to a Bravais lattice direction. The output array is generally assumed to be three dimensional, matching those indices.</li><li><code>EachLocalQuadByDistance(directions)</code> iterators through combinations of four sites <span>$s^\prime \leftarrow s \rightarrow t \rightarrow t^\prime$</span>. The given <code>directions</code> are directional indices used to derive <span>$s^\prime$</span> and <span>$t^\prime$</span> from the current source and target site <span>$s$</span> and <span>$t$</span>. The full output of this iterator is <code>(combined_idx, s, t, s&#39;, t&#39;)</code>, where <code>combined_idx</code> includes the basis index of <span>$s$</span>, <span>$t$</span>, the direction <span>$s \to t$</span> as well as the indices into <code>directions</code> for <span>$s \to s^\prime$</span> and <span>$t \to t^\prime$</span>.</li><li><code>EachLocalQuadBySyncedDistance(directions)</code> is the same as <code>EachLocalQuadByDistance</code> with the restriction that the directions <span>$s \to s^\prime$</span> and <span>$t \to t^\prime$</span> are the same. The <code>combined_idx</code> does contain an index <span>$t \to t^\prime$</span> as result.</li></ul><h3 id="Wrappers-1"><a class="docs-heading-anchor" href="#Wrappers-1">Wrappers</a><a class="docs-heading-anchor-permalink" href="#Wrappers-1" title="Permalink"></a></h3><p>The last category are wrappers around lattice iterators. They are used either to adjust the summation and further compress the output array, or to dispatch to different methods during measurement. The following are currently available:</p><ul><li><code>Sum(iter)</code> sets the output index to 1. This has the effect of summing all site combinations.</li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../model/">« Model</a><a class="docs-footer-nextpage" href="../fields/">Fields »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Wednesday 28 December 2022 22:16">Wednesday 28 December 2022</span>. Using Julia version 1.6.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
